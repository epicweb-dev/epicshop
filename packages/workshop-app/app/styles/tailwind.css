@import 'tailwindcss';
@import 'tailwindcss-safe-area';
@import 'tw-animate-css';

/* Tailwind v4 CSS-first configuration (Epic Stack-style) */
@custom-variant dark (&:is(.dark *));

@source '../**/*.{ts,tsx,jsx,js}';
@source '../../../example/**/*.md';
@source '../../../workshop-utils/src/**/*.ts';

@plugin '@tailwindcss/typography';
@plugin 'tailwindcss-radix';
@plugin 'tailwind-scrollbar';

/* light mode (or inverted) */
:root,
.dark .invert-theme,
.dark .invert-theme .invert-theme .invert-theme {
	--font-sans:
		Neogrotesk, ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
		'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
	--font-mono:
		'IBM Plex Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
		'Liberation Mono', 'Courier New', monospace;

	--background: 0 0% 100%;
	--foreground: 0 0% 0%;

	/* prefixed with foreground because it should look good on the background */
	--foreground-destructive: 345 82.7% 40.8%;

	--highlight: 220 85% 60%;

	--muted: 210 40% 96.1%;
	--muted-foreground: 215.4 16.3% 46.9%;

	/* scrollbars can't be hsl I guess */
	--scrollbar: #e5e5e5;

	--popover: 0 0% 100%;
	--popover-foreground: 222.2 47.4% 11.2%;

	--card: 0 0% 100%;
	--card-foreground: 222.2 47.4% 11.2%;

	--border: 214.3 31.8% 91.4%;
	--input: 214.3 31.8% 91.4%;

	--primary: 224 71% 4%;
	--primary-foreground: 213 31% 91%;

	--secondary: 210 40% 96.1%;
	--secondary-foreground: 222.2 47.4% 11.2%;

	--accent: 210 40% 96.1%;
	--accent-foreground: 222.2 47.4% 11.2%;

	--destructive: 0 100% 50%;
	--destructive-foreground: 210 40% 98%;

	--warning: 51 100% 95%;
	--warning-foreground: 56 100% 20%;

	--success: 142 76% 36%;
	--success-foreground: 355 25% 95%;

	--info: 221 83% 53%;
	--info-foreground: 210 40% 98%;

	--ring: 215 20.2% 65.1%;

	--radius: 0.5rem;
}

/* dark mode (or inverted) */
.dark,
.light .invert-theme,
.light .invert-theme .invert-theme .invert-theme {
	--background: 230 16% 14%;
	--foreground: 230 20% 96%;

	/* prefixed with foreground because it should look good on the background */
	--foreground-destructive: -4 68% 52%;

	--highlight: 220 90% 75%;

	--muted: 223 47% 11%;
	--muted-foreground: 215.4 16.3% 56.9%;

	/* scrollbars can't be hsl I guess */
	--scrollbar: #3a3a3a;

	--popover: 224 71% 4%;
	--popover-foreground: 215 20.2% 65.1%;

	--card: 224 71% 4%;
	--card-foreground: 213 31% 91%;

	--border: 230 6% 30%;
	--input: 216 34% 17%;

	--primary: 0 0% 100%;
	--primary-foreground: 222.2 47.4% 11.2%;

	--secondary: 222.2 47.4% 11.2%;
	--secondary-foreground: 210 40% 98%;

	--accent: 216 34% 17%;
	--accent-foreground: 210 40% 98%;

	--destructive: 0 63% 31%;
	--destructive-foreground: 210 40% 98%;

	--warning: 36 23% 9%;
	--warning-foreground: 47 100% 63%;

	--success: 142 76% 36%;
	--success-foreground: 355 25% 95%;

	--info: 221 83% 53%;
	--info-foreground: 210 40% 98%;

	--ring: 216 34% 17%;

	--radius: 0.5rem;
}

@theme inline {
	--radius-sm: calc(var(--radius) - 4px);
	--radius-md: calc(var(--radius) - 2px);
	--radius-lg: var(--radius);
	--radius-xl: calc(var(--radius) + 4px);

	--font-sans: var(--font-sans);
	--font-mono: var(--font-mono);

	--color-background: hsl(var(--background));
	--color-foreground: hsl(var(--foreground));
	--color-card: hsl(var(--card));
	--color-card-foreground: hsl(var(--card-foreground));
	--color-popover: hsl(var(--popover));
	--color-popover-foreground: hsl(var(--popover-foreground));
	--color-primary: hsl(var(--primary));
	--color-primary-foreground: hsl(var(--primary-foreground));
	--color-secondary: hsl(var(--secondary));
	--color-secondary-foreground: hsl(var(--secondary-foreground));
	--color-muted: hsl(var(--muted));
	--color-muted-foreground: hsl(var(--muted-foreground));
	--color-accent: hsl(var(--accent));
	--color-accent-foreground: hsl(var(--accent-foreground));
	--color-destructive: hsl(var(--destructive));
	--color-destructive-foreground: hsl(var(--destructive-foreground));
	--color-foreground-destructive: hsl(var(--foreground-destructive));
	--color-warning: hsl(var(--warning));
	--color-warning-foreground: hsl(var(--warning-foreground));
	--color-success: hsl(var(--success));
	--color-success-foreground: hsl(var(--success-foreground));
	--color-info: hsl(var(--info));
	--color-info-foreground: hsl(var(--info-foreground));
	--color-highlight: hsl(var(--highlight));
	--color-border: hsl(var(--border));
	--color-input: hsl(var(--input));
	--color-ring: hsl(var(--ring));
	--color-scrollbar: var(--scrollbar);
}

/* Custom type scale */
@theme {
	/* 1rem = 16px */
	--text-mega: 5rem;
	--text-mega--line-height: 5.25rem;
	--text-mega--font-weight: 700;

	--text-h1: 3.5rem;
	--text-h1--line-height: 3.875rem;
	--text-h1--font-weight: 700;
	--text-h2: 2.5rem;
	--text-h2--line-height: 3rem;
	--text-h2--font-weight: 700;
	--text-h3: 2rem;
	--text-h3--line-height: 2.25rem;
	--text-h3--font-weight: 700;
	--text-h4: 1.75rem;
	--text-h4--line-height: 2.25rem;
	--text-h4--font-weight: 700;
	--text-h5: 1.5rem;
	--text-h5--line-height: 2rem;
	--text-h5--font-weight: 700;
	--text-h6: 1rem;
	--text-h6--line-height: 1.25rem;
	--text-h6--font-weight: 700;

	--text-body-5xl: 3rem;
	--text-body-5xl--line-height: 3.25rem;
	--text-body-4xl: 2.5rem;
	--text-body-4xl--line-height: 2.75rem;
	--text-body-3xl: 2.25rem;
	--text-body-3xl--line-height: 2.5rem;
	--text-body-2xl: 2rem;
	--text-body-2xl--line-height: 2.25rem;
	--text-body-xl: 1.75rem;
	--text-body-xl--line-height: 2.25rem;
	--text-body-lg: 1.5rem;
	--text-body-lg--line-height: 2rem;
	--text-body-md: 1.25rem;
	--text-body-md--line-height: 1.75rem;
	--text-body-sm: 1rem;
	--text-body-sm--line-height: 1.25rem;
	--text-body-xs: 0.875rem;
	--text-body-xs--line-height: 1.125rem;
	--text-body-2xs: 0.75rem;
	--text-body-2xs--line-height: 1rem;

	--text-caption: 1.125rem;
	--text-caption--line-height: 1.5rem;
	--text-caption--font-weight: 600;

	--text-button: 0.75rem;
	--text-button--line-height: 1rem;
	--text-button--font-weight: 700;
}

@utility container {
	margin-inline: auto;
	padding-inline: 2rem;

	@media (width >= 1400px) {
		& {
			max-width: 1400px;
		}
	}
}

/* Typography plugin customizations */
@layer components {
	/* proseColors */
	.prose :where(*):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
		color: hsl(var(--foreground));
	}

	/* removeProseMargin */
	.prose > ul > li > *:first-child {
		margin-top: unset;
	}
	.prose > ul > li > *:last-child {
		margin-bottom: unset;
	}
	.prose > ol > li > *:first-child {
		margin-top: unset;
	}
	.prose > ol > li > *:last-child {
		margin-bottom: unset;
	}

	/* removeCodeBackticks */
	.prose
		:where(code):not(
			:where([class~='not-prose'], [class~='not-prose'] *)
		)::before {
		content: none;
	}
	.prose
		:where(code):not(
			:where([class~='not-prose'], [class~='not-prose'] *)
		)::after {
		content: none;
	}
}

@layer base {
	* {
		@apply border-border;
	}
	body {
		@apply bg-background text-foreground;
		font-feature-settings:
			'rlig' 1,
			'calt' 1;
	}
	html {
		height: -webkit-fill-available;
	}

	body {
		height: -webkit-fill-available;
	}

	button:not(:disabled),
	[role='button']:not(:disabled) {
		cursor: pointer;
	}
}

@layer utilities {
	.slideRightContent {
		transform-origin: var(--radix-popover-content-transform-origin);
		animation: slideRight 0.25s ease-out;
	}

	.slideUpContent {
		transform-origin: var(--radix-popover-content-transform-origin);
		animation: slideUp 0.25s ease-out;
	}
}

@keyframes slideRight {
	from {
		opacity: 0;
		transform: translateX(-100%);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideUp {
	from {
		opacity: 0;
		transform: translateY(100%);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes badgeBounce {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-3px);
	}
}

.animate-badge-bounce {
	animation: badgeBounce 1s ease-in-out infinite;
}
